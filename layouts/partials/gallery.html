<!--
    Licensed under MIT License 2025, Anoduck, The Anonymous Duck
    https://anoduck.mit-license.org

    Hinode is a creation of The Hinode Team / I.E. Mark Dumay -> Of, which all credit and property rights are due.

    TimelineJS is created by The Knight Labs at The NorthWestern University School of Engineering, for which, all credit and property rights are due.
-->
<!--
    Copyright ï¿½ 2024 The Hinode Team / Mark Dumay. All rights reserved.
    Use of this source code is governed by The MIT License (MIT) that can be found in the LICENSE file.
    Visit gethinode.com/license for more details.
-->

{{- $file := . -}}
{{- $galId := .galId -}}
{{- $imgGalFile := .imgGalFile -}}
{{- $debug := .debug -}}
{{- $index := "" -}}

{{- $imgGalSet := ( index $imgGalFile "content" ) -}}

<section class="photo-gallery" id="{{ $galId }}">
  <div class="container mb-6">
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 gallery-grid">
      {{/*  {{ .Store.Set "index" 0 }}
      {{ range $imgGalSet }}
        {{ $.Store.Set "index" (add ($.Store.Get "index") 1) }}
        {{ .Store.Set "index" ($.Store.Get "index") }}
        {{ partial "assets/image.html" ( dict "image" $index "debug" $debug ) }}
      {{ end }}  */}}
      {{- range $index, $image := $imgGalSet -}} 
        {{ partial "assets/image.html" ( dict "image" $image "debug" $debug )}} 
      {{ end }}
    </div>
  </div>
</section>

{{- if $debug }}
<p>The following values were used during rendering of the gallery template</p>
<ul>
  <li>Debugging enabled = {{ $debug }}</li>
  <li>Debugging imgset: {{ print $imgGalSet }}</li>
  {{- range $index, $image := $imgGalSet -}}
  <li>{{ $image }}</li>
  {{- end -}}
</ul>
{{ end }}

{{/*  Example of using scratchpad to store variable for iteration  */}}
{{/*  Replaced index with image in example below.  */}}
{{/*
{{ .Store.Set "image" 0 }}
{{ range $imgGalSet }}
  {{ $.Store.Set "image" (add ($.Store.Get "image") 1) }}
  {{ .Store.Set "image" ($.Store.Get "image") }}
  {{ partial ("assets/image.html" ( dict "image" $image "debug" $debug )) . }}
{{ end }}
*/}}

{{/*  Previous implementation  */}}
{{/*  
{{- range $index, $image := $imgGalSet -}} 
  {{ partial "assets/image.html" ( dict "image" $image "debug" $debug )}} 
{{ end }}
*/}}